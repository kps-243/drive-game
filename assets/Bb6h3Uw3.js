import{r as l,D as re,h as ie,k as me,c as r,a as t,b as Z,E as v,w as ee,T as de,d as p,t as u,F as ce,G as L,H as B,I as D,J as pe,o as i,K as O,L as ve,M as xe}from"./DReTIBq3.js";import{_ as fe}from"./DlAUqK2U.js";const ye={x:2,y:2,produits:[{nom:"Lait",quantite:10,emplacement:"A1"},{nom:"Beurre",quantite:5,emplacement:"A2"},{nom:"Yaourt",quantite:8,emplacement:"A3"},{nom:"CrÃ¨me fraÃ®che",quantite:4,emplacement:"A4"},{nom:"Lait d'amande",quantite:6,emplacement:"A5"}]},be={x:6,y:2,produits:[{nom:"Fromage",quantite:12,emplacement:"B1"},{nom:"Mozzarella",quantite:6,emplacement:"B2"},{nom:"GruyÃ¨re",quantite:7,emplacement:"B3"},{nom:"Brie",quantite:3,emplacement:"B4"},{nom:"Parmesan",quantite:5,emplacement:"B5"}]},ge={x:10,y:2,produits:[{nom:"CÃ©rÃ©ales",quantite:9,emplacement:"C1"},{nom:"Pain de mie",quantite:8,emplacement:"C2"},{nom:"Biscottes",quantite:6,emplacement:"C3"},{nom:"Brioches",quantite:7,emplacement:"C4"},{nom:"Croissants",quantite:5,emplacement:"C5"}]},he={x:14,y:2,produits:[{nom:"Chocolat",quantite:10,emplacement:"D1"},{nom:"Biscuits",quantite:7,emplacement:"D2"},{nom:"Bonbons",quantite:12,emplacement:"D3"},{nom:"PÃ¢tes Ã  tartiner",quantite:6,emplacement:"D4"},{nom:"Gaufres",quantite:4,emplacement:"D5"}]},we={x:18,y:2,produits:[{nom:"Confiture",quantite:5,emplacement:"E1"},{nom:"Miel",quantite:3,emplacement:"E2"},{nom:"Sirop",quantite:6,emplacement:"E3"},{nom:"Tartines",quantite:8,emplacement:"E4"},{nom:"PÃ¢te de noisette",quantite:5,emplacement:"E5"}]},qe={x:2,y:5,produits:[{nom:"PÃ¢tes",quantite:15,emplacement:"F1"},{nom:"Riz",quantite:10,emplacement:"F2"},{nom:"Couscous",quantite:6,emplacement:"F3"},{nom:"Semoule",quantite:7,emplacement:"F4"},{nom:"Quinoa",quantite:5,emplacement:"F5"}]},Ce={x:6,y:5,produits:[{nom:"Lentilles",quantite:9,emplacement:"G1"},{nom:"Pois chiches",quantite:6,emplacement:"G2"},{nom:"Haricots rouges",quantite:8,emplacement:"G3"},{nom:"Flageolets",quantite:7,emplacement:"G4"},{nom:"Soja",quantite:4,emplacement:"G5"}]},ke={x:10,y:5,produits:[{nom:"Carottes",quantite:9,emplacement:"H1"},{nom:"Tomates",quantite:11,emplacement:"H2"},{nom:"Courgettes",quantite:6,emplacement:"H3"},{nom:"Aubergines",quantite:5,emplacement:"H4"},{nom:"Concombres",quantite:8,emplacement:"H5"}]},_e={x:14,y:5,produits:[{nom:"Pommes",quantite:10,emplacement:"I1"},{nom:"Poires",quantite:7,emplacement:"I2"},{nom:"Bananes",quantite:9,emplacement:"I3"},{nom:"Oranges",quantite:8,emplacement:"I4"},{nom:"Fraises",quantite:6,emplacement:"I5"}]},je={x:18,y:5,produits:[{nom:"Salade",quantite:5,emplacement:"J1"},{nom:"Ã‰pinards",quantite:4,emplacement:"J2"},{nom:"Chou",quantite:7,emplacement:"J3"},{nom:"Brocoli",quantite:6,emplacement:"J4"},{nom:"Radis",quantite:3,emplacement:"J5"}]},Ie={x:2,y:8,produits:[{nom:"Poulet",quantite:10,emplacement:"K1"},{nom:"Steak",quantite:8,emplacement:"K2"},{nom:"Saucisse",quantite:7,emplacement:"K3"},{nom:"Jambon",quantite:6,emplacement:"K4"},{nom:"Dinde",quantite:9,emplacement:"K5"}]},Fe={x:6,y:8,produits:[{nom:"Poisson",quantite:5,emplacement:"L1"},{nom:"Saumon",quantite:7,emplacement:"L2"},{nom:"Thon",quantite:6,emplacement:"L3"},{nom:"Colin",quantite:4,emplacement:"L4"},{nom:"Crevettes",quantite:3,emplacement:"L5"}]},Se={x:10,y:8,produits:[{nom:"Boisson gazeuse",quantite:10,emplacement:"M1"},{nom:"Eau",quantite:15,emplacement:"M2"},{nom:"Jus d'orange",quantite:12,emplacement:"M3"},{nom:"Jus de pomme",quantite:10,emplacement:"M4"},{nom:"Limonade",quantite:8,emplacement:"M5"}]},Ae={x:14,y:8,produits:[{nom:"ThÃ©",quantite:6,emplacement:"N1"},{nom:"CafÃ©",quantite:9,emplacement:"N2"},{nom:"Infusion",quantite:5,emplacement:"N3"},{nom:"Chocolat chaud",quantite:4,emplacement:"N4"},{nom:"Cappuccino",quantite:3,emplacement:"N5"}]},Pe={x:18,y:8,produits:[{nom:"GlaÃ§ons",quantite:5,emplacement:"O1"},{nom:"Yaourt Ã  boire",quantite:4,emplacement:"O2"},{nom:"Boisson Ã©nergisante",quantite:6,emplacement:"O3"},{nom:"Smoothie",quantite:7,emplacement:"O4"},{nom:"ThÃ© glacÃ©",quantite:8,emplacement:"O5"}]},h={F00:ye,F01:be,F02:ge,F03:he,F04:we,F05:qe,F06:Ce,F07:ke,F08:_e,F09:je,F10:Ie,F11:Fe,F12:Se,F13:Ae,F14:Pe},te=window.setInterval,Te={class:"relative h-screen bg-cover bg-center bg-no-repeat bg-image"},Me={class:"relative z-10 h-full flex flex-col justify-center items-center overflow-y-auto p-6"},Le={class:"block mb-4"},Be={class:"block font-medium"},De=["onUpdate:modelValue"],ze={class:"block mb-4"},$e={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 text-white text-center px-6"},Je={key:1,class:"w-full max-w-4xl bg-white/80 backdrop-blur-md p-6 rounded-2xl shadow-xl space-y-8"},Ee={class:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-red-600 space-y-4"},Ge={class:"text-2xl font-bold text-gray-800"},Ne={class:"text-red-600"},Re={class:"flex items-center justify-between"},He={class:"text-lg font-semibold mt-4"},Ve={key:0,class:"bg-red-50 p-4 rounded-lg border border-red-200 shadow-inner text-center space-y-3"},Ke={class:"text-lg font-semibold text-red-700 flex justify-center items-center gap-2"},Oe={class:"text-xl font-bold text-red-900"},Ue={class:"text-gray-700 text-sm flex justify-center items-center gap-1"},Ye={class:"bg-red-100 text-red-800 font-bold px-2 py-1 rounded"},Qe={class:"flex justify-center"},We={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Xe={class:"text-white text-6xl font-bold animate-bounce"},Ze={class:"flex justify-center items-center overflow-hidden"},et={key:1,class:"flex flex-col items-center mt-6 space-y-2"},tt={class:"flex justify-center space-x-2"},nt={class:"flex justify-center space-x-2"},ot={key:2,class:"bg-yellow-100 p-4 rounded-lg shadow"},st={class:"text-lg font-semibold text-yellow-700"},lt={key:0,class:"mt-2"},at=["value"],ut={key:3,class:"text-center"},rt={key:2,class:"p-6 max-w-3xl mx-auto space-y-6 bg-white shadow rounded-2xl backdrop-blur-md"},it={class:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg shadow text-center"},mt={class:"text-xl font-semibold text-green-800"},dt={class:"font-bold text-green-900"},ct={class:"font-bold"},pt={class:"font-bold"},vt={class:"w-full table-auto border-collapse"},xt={class:"border px-4 py-2"},ft={class:"border px-4 py-2"},yt={class:"border px-4 py-2"},bt={class:"text-center"},U=20,Y=10,gt={__name:"index",setup(ht){const _=[],z=l({});l([]);const c=l([]),x=l(0),ne=l(0),S=l(0),k=l(null),j=l("");l(0);const Q=l(null),$=l(!1),y=l(!1),oe=l(null),w=l(null),f=l({x:0,y:0}),J=l(""),I=l(1),A=l([]),q=l("selection"),F=l(!1),P=l(3),E=l(!1),T=l(2);l(!1);const G=l(0),N=l(!0);re(y,o=>{if(o){const{x:e,y:s}=f.value,d=[g(e-1,s),g(e+1,s),g(e,s-1),g(e,s+1)].find(n=>(n==null?void 0:n.type)==="rayon");w.value=(d==null?void 0:d.rayonId)||null}else w.value=null});function R(o){const e=Math.floor(o/6e3),s=Math.floor(o%6e3/100),m=o%100;return`${String(e).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(m).padStart(2,"0")}`}function se(){q.value="jeu",c.value=A.value.map(o=>({nom:o,score:0,temps:0,listeDeCourses:W(T.value),produitActuelIndex:0})),x.value=0,H()}async function H(){j.value="",y.value=!1,f.value={x:0,y:0};const o=c.value[x.value];o.score=0,o.produitActuelIndex=0,o.listeDeCourses=W(T.value),k.value=o.listeDeCourses[o.produitActuelIndex],ne.value=0,S.value=0,$.value=!1,F.value=!0,E.value=!0,P.value=3;const e=te(()=>{P.value--,P.value===0&&(clearInterval(e),E.value=!1,$.value=!0,F.value=!1,Q.value=te(()=>{F.value||S.value++},10))},1e3)}const V=()=>{N.value=window.innerWidth>window.innerHeight};function W(o=2){const e=[],s=Object.keys(h).sort();for(const n of s)(h[n].produits||h[n]).forEach(C=>{e.push({...C,rayonId:n,position:{x:h[n].x,y:h[n].y}})});const d=e.sort(()=>.5-Math.random()).slice(0,o);return d.sort((n,a)=>n.rayonId.localeCompare(a.rayonId)),d}function le(){const o=c.value[x.value],e=o.listeDeCourses[o.produitActuelIndex];if(j.value===e.nom)if(J.value=`âœ… Bon produit trouvÃ© : ${e.nom}`,o.score++,o.produitActuelIndex++,j.value="",o.produitActuelIndex>=o.listeDeCourses.length){o.temps=S.value,clearInterval(Q.value),ae();return}else k.value=o.listeDeCourses[o.produitActuelIndex];else J.value=`âŒ Mauvais produit. Produit attendu : ${e.nom}`;setTimeout(()=>{J.value=""},2e3)}async function ae(){x.value++,x.value>=c.value.length?(q.value="resultat",$.value=!1):await H()}function ue(){F.value=!1,H()}function M(o){o==="haut"&&b(0,-1),o==="bas"&&b(0,1),o==="gauche"&&b(-1,0),o==="droite"&&b(1,0)}function X(){const o=window.innerWidth,e=window.innerHeight,s=Math.min(o,e)*.9;G.value=s}ie(()=>{V(),window.addEventListener("resize",V),X(),window.addEventListener("resize",X),z.value=h;for(let o=0;o<Y;o++)for(let e=0;e<U;e++)_.push({x:e,y:o,adresse:`Cell${e+1}-${o+1}`,type:"chemin"});for(const o in h){const{x:e,y:s}=h[o],m=_.find(d=>d.x===e&&d.y===s);m&&(m.type="rayon",m.rayonId=o)}window.addEventListener("keydown",o=>{o.key==="ArrowUp"&&b(0,-1),o.key==="ArrowDown"&&b(0,1),o.key==="ArrowLeft"&&b(-1,0),o.key==="ArrowRight"&&b(1,0)})}),me(()=>{window.removeEventListener("resize",V)});let K=!0;function b(o,e){if(!K)return;const s=f.value.x+o,m=f.value.y+e,d=_.find(n=>n.x===s&&n.y===m);if(d&&d.type==="chemin"&&(f.value={x:s,y:m},oe.value=d,y.value)){K=!1,setTimeout(()=>{K=!0},400);const a=[g(s-1,m),g(s+1,m),g(s,m-1),g(s,m+1)].find(C=>(C==null?void 0:C.type)==="rayon");w.value=(a==null?void 0:a.rayonId)||null}}function g(o,e){return _.find(s=>s.x===o&&s.y===e)}return(o,e)=>{var s,m,d;return i(),r("div",Te,[e[28]||(e[28]=t("div",{class:"absolute inset-0 bg-white bg-opacity-70"},null,-1)),t("div",Me,[e[26]||(e[26]=t("h1",{class:"text-3xl sm:text-4xl md:text-5xl font-extrabold text-white text-red-600 bg-white rounded-xl text-center px-4 py-2 mt-32 mb-12 drop-shadow-lg"}," Drive Game ",-1)),Z(de,{name:"fade-resize",mode:"out-in",appear:""},{default:ee(()=>[q.value==="selection"?(i(),r("div",{key:I.value,class:"w-full max-w-md bg-white backdrop-blur-md p-8 rounded-2xl shadow-2xl"},[e[11]||(e[11]=t("h2",{class:"text-3xl font-bold mb-6 text-center"},"ğŸ›’ SÃ©lection du mode",-1)),t("label",Le,[e[9]||(e[9]=t("span",{class:"font-semibold"},"Nombre de joueurs :",-1)),D(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=n=>I.value=n),min:"1",max:"4",class:"border rounded px-3 py-2 mt-1 w-full"},null,512),[[O,I.value]])]),Z(ve,{name:"fade",tag:"div",class:"space-y-3 mb-6",appear:""},{default:ee(()=>[(i(!0),r(L,null,B(I.value,(n,a)=>(i(),r("div",{key:a,class:"mb-3"},[t("label",Be,[p(" ğŸ‘¤ Joueur "+u(a+1)+" : ",1),D(t("input",{"onUpdate:modelValue":C=>A.value[a]=C,class:"mt-1 border rounded px-3 py-2 w-full"},null,8,De),[[O,A.value[a]]])])]))),128))]),_:1}),t("label",ze,[e[10]||(e[10]=t("span",{class:"font-semibold"},"ğŸ§º Nombre de produits Ã  rÃ©cupÃ©rer par joueur :",-1)),D(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=n=>T.value=n),min:"1",max:"20",class:"border rounded px-3 py-2 mt-1 w-full"},null,512),[[O,T.value,void 0,{number:!0}]])]),e[12]||(e[12]=t("div",{class:"bg-yellow-50 border border-yellow-300 text-yellow-900 text-sm rounded-xl mt-12 p-4 mb-6"},[t("h3",{class:"text-lg font-bold mb-2"},"ğŸ“œ RÃ¨gles du jeu"),t("ul",{class:"list-disc pl-5 space-y-1"},[t("li",null,"Chaque joueur joue Ã  tour de rÃ´le pour rÃ©cupÃ©rer un certain nombre de produits dans les rayons."),t("li",null,"Les produits sont tirÃ©s alÃ©atoirement au dÃ©but du tour de chaque joueur, et triÃ©s selon l'ordre des rayons (F00 â†’ F14)."),t("li",null,"Un chronomÃ¨tre dÃ©marre Ã  chaque dÃ©but de tour. Le temps total est enregistrÃ© pour chaque joueur."),t("li",null,[p("ğŸ§º "),t("strong",null,'Mode "prise"'),p(" : activez ce mode pour rÃ©cupÃ©rer un produit. Attention, rester en permanence dessus vous ralentira !")]),t("li",null,"Le joueur ayant rÃ©cupÃ©rÃ© tous ses produits en un minimum de temps gagne la partie.")])],-1)),t("button",{onClick:se,class:"w-full bg-red-600 text-white font-semibold py-3 rounded-xl mt-4 hover:bg-red-700 transition"}," â–¶ï¸ Commencer le jeu ")])):v("",!0)]),_:1}),!N.value&&q.value==="jeu"?(i(),r("div",$e,e[13]||(e[13]=[t("div",{class:"text-xl font-semibold"}," ğŸ” Tourne ton Ã©cran en mode paysage pour jouer confortablement ! ",-1)]))):v("",!0),N.value&&q.value==="jeu"?(i(),r("div",Je,[t("div",Ee,[t("h2",Ge,[e[14]||(e[14]=p(" ğŸ® Tour de : ")),t("span",Ne,u((s=c.value[x.value])==null?void 0:s.nom),1)]),t("div",Re,[t("p",null,[e[15]||(e[15]=p("â± Temps : ")),t("strong",null,u(R(S.value)),1)]),t("p",null,[e[16]||(e[16]=p("ğŸ† Score : ")),t("strong",null,u((m=c.value[x.value])==null?void 0:m.score),1)])]),t("p",He," ğŸ›’ Produits restants : "+u(c.value[x.value].listeDeCourses.length-c.value[x.value].produitActuelIndex),1),k.value?(i(),r("div",Ve,[t("h3",Ke,[e[17]||(e[17]=p(" ğŸ§º Produit Ã  trouver : ")),t("span",Oe,u(k.value.nom),1)]),t("p",Ue,[e[18]||(e[18]=p(" ğŸ“ Adresse : ")),t("span",Ye,u(k.value.rayonId+k.value.emplacement),1)])])):v("",!0),t("div",Qe,[t("button",{onClick:e[2]||(e[2]=n=>y.value=!y.value),class:"mt-4 bg-blue-600 text-white font-semibold px-5 py-2 rounded-lg hover:bg-blue-700 transition"},u(y.value?"ğŸšª Quitter mode prise":"ğŸ›’ Activer mode prise"),1)])]),E.value?(i(),r("div",We,[t("div",Xe,u(P.value),1)])):v("",!0),t("div",Ze,[t("div",{class:"grid",style:ce({display:"grid",gridTemplateColumns:`repeat(${U}, 1fr)`,gridTemplateRows:`repeat(${Y}, 1fr)`,width:G.value+"px",height:G.value*(Y/U)+"px"})},[(i(),r(L,null,B(_,n=>t("div",{key:`${n.x}-${n.y}`,class:xe(["lg:w-8 lg:h-8 w-4 h-4 text-xs flex items-center justify-center rounded shadow-sm transition-all duration-200 ",n.type==="rayon"?"bg-yellow-400 text-black font-bold":"bg-gray-100",n.x===f.value.x&&n.y===f.value.y?"ring-2 ring-red-500":""])},u(n.rayonId||""),3)),64))],4)]),y.value?v("",!0):(i(),r("div",et,[t("div",tt,[t("button",{onClick:e[3]||(e[3]=n=>M("haut")),class:"p-3 bg-gray-300 rounded-full shadow text-xl"},"â¬†ï¸")]),t("div",nt,[t("button",{onClick:e[4]||(e[4]=n=>M("gauche")),class:"p-3 bg-gray-300 rounded-full shadow text-xl"},"â¬…ï¸"),t("button",{onClick:e[5]||(e[5]=n=>M("bas")),class:"p-3 bg-gray-300 rounded-full shadow text-xl"},"â¬‡ï¸"),t("button",{onClick:e[6]||(e[6]=n=>M("droite")),class:"p-3 bg-gray-300 rounded-full shadow text-xl"},"â¡ï¸")])])),y.value&&w.value?(i(),r("div",ot,[t("h3",st,"ğŸ“¦ Rayon "+u(w.value),1),t("p",null,"ğŸ§ Position joueur : "+u(f.value.x)+" / "+u(f.value.y),1),(d=z.value[w.value])!=null&&d.produits?(i(),r("div",lt,[e[20]||(e[20]=t("label",{class:"block font-medium mb-1"},"ğŸ› Choisis un produit :",-1)),D(t("select",{"onUpdate:modelValue":e[7]||(e[7]=n=>j.value=n),onChange:le,class:"w-full p-2 rounded border"},[e[19]||(e[19]=t("option",{disabled:"",value:""},"-- SÃ©lectionner un produit --",-1)),(i(!0),r(L,null,B(z.value[w.value].produits,(n,a)=>(i(),r("option",{key:a,value:n.nom},u(n.nom)+" - "+u(n.quantite),9,at))),128))],544),[[pe,j.value]])])):v("",!0)])):v("",!0),F.value?(i(),r("div",ut,[t("button",{onClick:ue,class:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," ğŸ‘‰ Joueur Suivant ")])):v("",!0)])):v("",!0),q.value==="resultat"?(i(),r("div",rt,[e[25]||(e[25]=t("h2",{class:"text-3xl font-bold text-green-700 text-center"},"ğŸ‰ Fin de la partie !",-1)),t("div",it,[t("p",mt,[e[21]||(e[21]=p(" ğŸ† Gagnant : ")),t("span",dt,u(c.value.slice().sort((n,a)=>a.score-n.score||n.temps-a.temps)[0].nom),1),e[22]||(e[22]=p(" avec ")),t("span",ct,u(c.value.slice().sort((n,a)=>a.score-n.score||n.temps-a.temps)[0].score),1),e[23]||(e[23]=p(" points en ")),t("span",pt,u(R(c.value.slice().sort((n,a)=>a.score-n.score||n.temps-a.temps)[0].temps)),1)])]),t("table",vt,[e[24]||(e[24]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"border px-4 py-2 text-left"},"ğŸ‘¤ Joueur"),t("th",{class:"border px-4 py-2 text-left"},"ğŸ† Score"),t("th",{class:"border px-4 py-2 text-left"},"â± Temps")])],-1)),t("tbody",null,[(i(!0),r(L,null,B(c.value.slice().sort((n,a)=>a.score-n.score||n.temps-a.temps),n=>(i(),r("tr",{key:n.nom},[t("td",xt,u(n.nom),1),t("td",ft,u(n.score),1),t("td",yt,u(R(n.temps)),1)]))),128))])]),t("div",bt,[t("button",{onClick:e[8]||(e[8]=()=>{A.value=[],I.value=1,q.value="selection"}),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," ğŸ” Rejouer ")])])):v("",!0),e[27]||(e[27]=t("div",{class:"text-center text-sm text-gray-600 mt-4 lg:mt-8"},[p(" Made by "),t("a",{href:"https://mkps.fr",target:"_blank",class:"underline hover:text-purple-700 font-semibold"},"Morgan KPASSI ğŸ’œ")],-1))])])}}},Ct=fe(gt,[["__scopeId","data-v-81db81fc"]]);export{Ct as default};
