import{r as l,D as ne,h as oe,c as m,a as t,b as K,E as b,w as O,T as se,d as p,t as u,F as ae,G as B,H as D,I as M,J as le,o as d,K as R,L as ue,M as re}from"./Bj6_lcNJ.js";import{_ as ie}from"./DlAUqK2U.js";const me={x:2,y:2,produits:[{nom:"Lait",quantite:10,emplacement:"A1"},{nom:"Beurre",quantite:5,emplacement:"A2"},{nom:"Yaourt",quantite:8,emplacement:"A3"},{nom:"Crème fraîche",quantite:4,emplacement:"A4"},{nom:"Lait d'amande",quantite:6,emplacement:"A5"}]},de={x:6,y:2,produits:[{nom:"Fromage",quantite:12,emplacement:"B1"},{nom:"Mozzarella",quantite:6,emplacement:"B2"},{nom:"Gruyère",quantite:7,emplacement:"B3"},{nom:"Brie",quantite:3,emplacement:"B4"},{nom:"Parmesan",quantite:5,emplacement:"B5"}]},ce={x:10,y:2,produits:[{nom:"Céréales",quantite:9,emplacement:"C1"},{nom:"Pain de mie",quantite:8,emplacement:"C2"},{nom:"Biscottes",quantite:6,emplacement:"C3"},{nom:"Brioches",quantite:7,emplacement:"C4"},{nom:"Croissants",quantite:5,emplacement:"C5"}]},pe={x:14,y:2,produits:[{nom:"Chocolat",quantite:10,emplacement:"D1"},{nom:"Biscuits",quantite:7,emplacement:"D2"},{nom:"Bonbons",quantite:12,emplacement:"D3"},{nom:"Pâtes à tartiner",quantite:6,emplacement:"D4"},{nom:"Gaufres",quantite:4,emplacement:"D5"}]},ve={x:18,y:2,produits:[{nom:"Confiture",quantite:5,emplacement:"E1"},{nom:"Miel",quantite:3,emplacement:"E2"},{nom:"Sirop",quantite:6,emplacement:"E3"},{nom:"Tartines",quantite:8,emplacement:"E4"},{nom:"Pâte de noisette",quantite:5,emplacement:"E5"}]},xe={x:2,y:5,produits:[{nom:"Pâtes",quantite:15,emplacement:"F1"},{nom:"Riz",quantite:10,emplacement:"F2"},{nom:"Couscous",quantite:6,emplacement:"F3"},{nom:"Semoule",quantite:7,emplacement:"F4"},{nom:"Quinoa",quantite:5,emplacement:"F5"}]},ye={x:6,y:5,produits:[{nom:"Lentilles",quantite:9,emplacement:"G1"},{nom:"Pois chiches",quantite:6,emplacement:"G2"},{nom:"Haricots rouges",quantite:8,emplacement:"G3"},{nom:"Flageolets",quantite:7,emplacement:"G4"},{nom:"Soja",quantite:4,emplacement:"G5"}]},be={x:10,y:5,produits:[{nom:"Carottes",quantite:9,emplacement:"H1"},{nom:"Tomates",quantite:11,emplacement:"H2"},{nom:"Courgettes",quantite:6,emplacement:"H3"},{nom:"Aubergines",quantite:5,emplacement:"H4"},{nom:"Concombres",quantite:8,emplacement:"H5"}]},fe={x:14,y:5,produits:[{nom:"Pommes",quantite:10,emplacement:"I1"},{nom:"Poires",quantite:7,emplacement:"I2"},{nom:"Bananes",quantite:9,emplacement:"I3"},{nom:"Oranges",quantite:8,emplacement:"I4"},{nom:"Fraises",quantite:6,emplacement:"I5"}]},ge={x:18,y:5,produits:[{nom:"Salade",quantite:5,emplacement:"J1"},{nom:"Épinards",quantite:4,emplacement:"J2"},{nom:"Chou",quantite:7,emplacement:"J3"},{nom:"Brocoli",quantite:6,emplacement:"J4"},{nom:"Radis",quantite:3,emplacement:"J5"}]},qe={x:2,y:8,produits:[{nom:"Poulet",quantite:10,emplacement:"K1"},{nom:"Steak",quantite:8,emplacement:"K2"},{nom:"Saucisse",quantite:7,emplacement:"K3"},{nom:"Jambon",quantite:6,emplacement:"K4"},{nom:"Dinde",quantite:9,emplacement:"K5"}]},he={x:6,y:8,produits:[{nom:"Poisson",quantite:5,emplacement:"L1"},{nom:"Saumon",quantite:7,emplacement:"L2"},{nom:"Thon",quantite:6,emplacement:"L3"},{nom:"Colin",quantite:4,emplacement:"L4"},{nom:"Crevettes",quantite:3,emplacement:"L5"}]},we={x:10,y:8,produits:[{nom:"Boisson gazeuse",quantite:10,emplacement:"M1"},{nom:"Eau",quantite:15,emplacement:"M2"},{nom:"Jus d'orange",quantite:12,emplacement:"M3"},{nom:"Jus de pomme",quantite:10,emplacement:"M4"},{nom:"Limonade",quantite:8,emplacement:"M5"}]},Ce={x:14,y:8,produits:[{nom:"Thé",quantite:6,emplacement:"N1"},{nom:"Café",quantite:9,emplacement:"N2"},{nom:"Infusion",quantite:5,emplacement:"N3"},{nom:"Chocolat chaud",quantite:4,emplacement:"N4"},{nom:"Cappuccino",quantite:3,emplacement:"N5"}]},_e={x:18,y:8,produits:[{nom:"Glaçons",quantite:5,emplacement:"O1"},{nom:"Yaourt à boire",quantite:4,emplacement:"O2"},{nom:"Boisson énergisante",quantite:6,emplacement:"O3"},{nom:"Smoothie",quantite:7,emplacement:"O4"},{nom:"Thé glacé",quantite:8,emplacement:"O5"}]},f={F00:me,F01:de,F02:ce,F03:pe,F04:ve,F05:xe,F06:ye,F07:be,F08:fe,F09:ge,F10:qe,F11:he,F12:we,F13:Ce,F14:_e},U=window.setInterval,ke={class:"relative h-screen bg-cover bg-center bg-no-repeat bg-image"},Ie={class:"relative z-10 h-full flex flex-col justify-center items-center overflow-y-auto p-6"},Fe={class:"block mb-4"},je={class:"block font-medium"},Ae=["onUpdate:modelValue"],Pe={class:"block mb-4"},Se={key:0,class:"w-full max-w-4xl bg-white/80 backdrop-blur-md p-6 rounded-2xl shadow-xl space-y-8"},Te={class:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-red-600 space-y-4"},Be={class:"text-2xl font-bold text-gray-800"},De={class:"text-red-600"},Me={class:"flex items-center justify-between"},Le={class:"text-lg font-semibold mt-4"},Je={key:0,class:"bg-red-50 p-4 rounded-lg border border-red-200 shadow-inner text-center space-y-3"},Ee={class:"text-lg font-semibold text-red-700 flex justify-center items-center gap-2"},Ge={class:"text-xl font-bold text-red-900"},Ne={class:"text-gray-700 text-sm flex justify-center items-center gap-1"},$e={class:"bg-red-100 text-red-800 font-bold px-2 py-1 rounded"},ze={class:"flex justify-center"},Re={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Ve={class:"text-white text-6xl font-bold animate-bounce"},He={class:"flex justify-center"},Ke={key:1,class:"bg-yellow-100 p-4 rounded-lg shadow"},Oe={class:"text-lg font-semibold text-yellow-700"},Ue={key:0,class:"mt-2"},Ye=["value"],Qe={key:2,class:"text-center"},Xe={key:1,class:"p-6 max-w-3xl mx-auto space-y-6 bg-white shadow rounded-2xl backdrop-blur-md"},We={class:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg shadow text-center"},Ze={class:"text-xl font-semibold text-green-800"},et={class:"font-bold text-green-900"},tt={class:"font-bold"},nt={class:"font-bold"},ot={class:"w-full table-auto border-collapse"},st={class:"border px-4 py-2"},at={class:"border px-4 py-2"},lt={class:"border px-4 py-2"},ut={class:"text-center"},Y=20,rt=10,it={__name:"index",setup(mt){const _=[],L=l({});l([]);const c=l([]),v=l(0),Q=l(0),j=l(0),w=l(null),k=l("");l(0);const V=l(null),J=l(!1),g=l(!1),X=l(null),q=l(null),x=l({x:0,y:0}),E=l(""),I=l(1),A=l([]),C=l("selection"),F=l(!1),P=l(3),G=l(!1),S=l(2);ne(g,o=>{if(o){const{x:e,y:a}=x.value,i=[y(e-1,a),y(e+1,a),y(e,a-1),y(e,a+1)].find(n=>(n==null?void 0:n.type)==="rayon");q.value=(i==null?void 0:i.rayonId)||null}else q.value=null});function N(o){const e=Math.floor(o/6e3),a=Math.floor(o%6e3/100),r=o%100;return`${String(e).padStart(2,"0")}:${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function W(){C.value="jeu",c.value=A.value.map(o=>({nom:o,score:0,temps:0,listeDeCourses:H(S.value),produitActuelIndex:0})),v.value=0,$()}async function $(){k.value="",g.value=!1,x.value={x:0,y:0};const o=c.value[v.value];o.score=0,o.produitActuelIndex=0,o.listeDeCourses=H(S.value),w.value=o.listeDeCourses[o.produitActuelIndex],Q.value=0,j.value=0,J.value=!1,F.value=!0,G.value=!0,P.value=3;const e=U(()=>{P.value--,P.value===0&&(clearInterval(e),G.value=!1,J.value=!0,F.value=!1,V.value=U(()=>{F.value||j.value++},10))},1e3)}function H(o=2){const e=[],a=Object.keys(f).sort();for(const n of a)(f[n].produits||f[n]).forEach(h=>{e.push({...h,rayonId:n,position:{x:f[n].x,y:f[n].y}})});const i=e.sort(()=>.5-Math.random()).slice(0,o);return i.sort((n,s)=>n.rayonId.localeCompare(s.rayonId)),i}function Z(){const o=c.value[v.value],e=o.listeDeCourses[o.produitActuelIndex];if(k.value===e.nom)if(E.value=`✅ Bon produit trouvé : ${e.nom}`,o.score++,o.produitActuelIndex++,k.value="",o.produitActuelIndex>=o.listeDeCourses.length){o.temps=j.value,clearInterval(V.value),ee();return}else w.value=o.listeDeCourses[o.produitActuelIndex];else E.value=`❌ Mauvais produit. Produit attendu : ${e.nom}`;setTimeout(()=>{E.value=""},2e3)}async function ee(){v.value++,v.value>=c.value.length?(C.value="resultat",J.value=!1):await $()}function te(){F.value=!1,$()}oe(()=>{L.value=f;for(let o=0;o<rt;o++)for(let e=0;e<Y;e++)_.push({x:e,y:o,adresse:`Cell${e+1}-${o+1}`,type:"chemin"});for(const o in f){const{x:e,y:a}=f[o],r=_.find(i=>i.x===e&&i.y===a);r&&(r.type="rayon",r.rayonId=o)}window.addEventListener("keydown",o=>{o.key==="ArrowUp"&&T(0,-1),o.key==="ArrowDown"&&T(0,1),o.key==="ArrowLeft"&&T(-1,0),o.key==="ArrowRight"&&T(1,0)})});let z=!0;function T(o,e){if(!z)return;const a=x.value.x+o,r=x.value.y+e,i=_.find(n=>n.x===a&&n.y===r);if(i&&i.type==="chemin"&&(x.value={x:a,y:r},X.value=i,g.value)){z=!1,setTimeout(()=>{z=!0},400);const s=[y(a-1,r),y(a+1,r),y(a,r-1),y(a,r+1)].find(h=>(h==null?void 0:h.type)==="rayon");q.value=(s==null?void 0:s.rayonId)||null}}function y(o,e){return _.find(a=>a.x===o&&a.y===e)}return(o,e)=>{var a,r,i;return d(),m("div",ke,[e[21]||(e[21]=t("div",{class:"absolute inset-0 bg-white bg-opacity-70"},null,-1)),t("div",Ie,[K(se,{name:"fade-resize",mode:"out-in",appear:""},{default:O(()=>[C.value==="selection"?(d(),m("div",{key:I.value,class:"w-full max-w-md bg-white backdrop-blur-md p-8 rounded-2xl shadow-2xl"},[e[7]||(e[7]=t("h2",{class:"text-3xl font-bold text-red-600 mb-6 text-center"},"🛒 Sélection du mode",-1)),t("label",Fe,[e[5]||(e[5]=t("span",{class:"font-semibold"},"Nombre de joueurs :",-1)),M(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=n=>I.value=n),min:"1",max:"4",class:"border rounded px-3 py-2 mt-1 w-full"},null,512),[[R,I.value]])]),K(ue,{name:"fade",tag:"div",class:"space-y-3 mb-6",appear:""},{default:O(()=>[(d(!0),m(B,null,D(I.value,(n,s)=>(d(),m("div",{key:s,class:"mb-3"},[t("label",je,[p(" 👤 Joueur "+u(s+1)+" : ",1),M(t("input",{"onUpdate:modelValue":h=>A.value[s]=h,class:"mt-1 border rounded px-3 py-2 w-full"},null,8,Ae),[[R,A.value[s]]])])]))),128))]),_:1}),t("label",Pe,[e[6]||(e[6]=t("span",{class:"font-semibold"},"🧺 Nombre de produits à récupérer par joueur :",-1)),M(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=n=>S.value=n),min:"1",max:"20",class:"border rounded px-3 py-2 mt-1 w-full"},null,512),[[R,S.value,void 0,{number:!0}]])]),e[8]||(e[8]=t("div",{class:"bg-yellow-50 border border-yellow-300 text-yellow-900 text-sm rounded-xl mt-12 p-4 mb-6"},[t("h3",{class:"text-lg font-bold mb-2"},"📜 Règles du jeu"),t("ul",{class:"list-disc pl-5 space-y-1"},[t("li",null,"Chaque joueur joue à tour de rôle pour récupérer un certain nombre de produits dans les rayons."),t("li",null,"Les produits sont tirés aléatoirement au début du tour de chaque joueur, et triés selon l'ordre des rayons (F00 → F14)."),t("li",null,"Un chronomètre démarre à chaque début de tour. Le temps total est enregistré pour chaque joueur."),t("li",null,[p("🧺 "),t("strong",null,'Mode "prise"'),p(" : activez ce mode pour récupérer un produit. Attention, rester en permanence dessus vous ralentira !")]),t("li",null,"Le joueur ayant récupéré tous ses produits en un minimum de temps gagne la partie.")])],-1)),t("button",{onClick:W,class:"w-full bg-red-600 text-white font-semibold py-3 rounded-xl mt-4 hover:bg-red-700 transition"}," ▶️ Commencer le jeu ")])):b("",!0)]),_:1}),C.value==="jeu"?(d(),m("div",Se,[t("div",Te,[t("h2",Be,[e[9]||(e[9]=p(" 🎮 Tour de : ")),t("span",De,u((a=c.value[v.value])==null?void 0:a.nom),1)]),t("div",Me,[t("p",null,[e[10]||(e[10]=p("⏱ Temps : ")),t("strong",null,u(N(j.value)),1)]),t("p",null,[e[11]||(e[11]=p("🏆 Score : ")),t("strong",null,u((r=c.value[v.value])==null?void 0:r.score),1)])]),t("p",Le," 🛒 Produits restants : "+u(c.value[v.value].listeDeCourses.length-c.value[v.value].produitActuelIndex),1),w.value?(d(),m("div",Je,[t("h3",Ee,[e[12]||(e[12]=p(" 🧺 Produit à trouver : ")),t("span",Ge,u(w.value.nom),1)]),t("p",Ne,[e[13]||(e[13]=p(" 📍 Adresse : ")),t("span",$e,u(w.value.rayonId+w.value.emplacement),1)])])):b("",!0),t("div",ze,[t("button",{onClick:e[2]||(e[2]=n=>g.value=!g.value),class:"mt-4 bg-blue-600 text-white font-semibold px-5 py-2 rounded-lg hover:bg-blue-700 transition"},u(g.value?"🚪 Quitter mode prise":"🛒 Activer mode prise"),1)])]),G.value?(d(),m("div",Re,[t("div",Ve,u(P.value),1)])):b("",!0),t("div",He,[t("div",{class:"grid gap-2",style:ae(`grid-template-columns: repeat(${Y}, 30px);`)},[(d(),m(B,null,D(_,n=>t("div",{key:`${n.x}-${n.y}`,class:re(["w-8 h-8 text-xs flex items-center justify-center rounded shadow-sm transition-all duration-200",n.type==="rayon"?"bg-yellow-400 text-black font-bold":"bg-gray-100",n.x===x.value.x&&n.y===x.value.y?"ring-2 ring-red-500":""])},u(n.rayonId||""),3)),64))],4)]),g.value&&q.value?(d(),m("div",Ke,[t("h3",Oe,"📦 Rayon "+u(q.value),1),t("p",null,"🧍 Position joueur : "+u(x.value.x)+" / "+u(x.value.y),1),(i=L.value[q.value])!=null&&i.produits?(d(),m("div",Ue,[e[15]||(e[15]=t("label",{class:"block font-medium mb-1"},"🛍 Choisis un produit :",-1)),M(t("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>k.value=n),onChange:Z,class:"w-full p-2 rounded border"},[e[14]||(e[14]=t("option",{disabled:"",value:""},"-- Sélectionner un produit --",-1)),(d(!0),m(B,null,D(L.value[q.value].produits,(n,s)=>(d(),m("option",{key:s,value:n.nom},u(n.nom)+" - "+u(n.quantite),9,Ye))),128))],544),[[le,k.value]])])):b("",!0)])):b("",!0),F.value?(d(),m("div",Qe,[t("button",{onClick:te,class:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," 👉 Joueur Suivant ")])):b("",!0)])):b("",!0),C.value==="resultat"?(d(),m("div",Xe,[e[20]||(e[20]=t("h2",{class:"text-3xl font-bold text-green-700 text-center"},"🎉 Fin de la partie !",-1)),t("div",We,[t("p",Ze,[e[16]||(e[16]=p(" 🏆 Gagnant : ")),t("span",et,u(c.value.slice().sort((n,s)=>s.score-n.score||n.temps-s.temps)[0].nom),1),e[17]||(e[17]=p(" avec ")),t("span",tt,u(c.value.slice().sort((n,s)=>s.score-n.score||n.temps-s.temps)[0].score),1),e[18]||(e[18]=p(" points en ")),t("span",nt,u(N(c.value.slice().sort((n,s)=>s.score-n.score||n.temps-s.temps)[0].temps)),1)])]),t("table",ot,[e[19]||(e[19]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"border px-4 py-2 text-left"},"👤 Joueur"),t("th",{class:"border px-4 py-2 text-left"},"🏆 Score"),t("th",{class:"border px-4 py-2 text-left"},"⏱ Temps")])],-1)),t("tbody",null,[(d(!0),m(B,null,D(c.value.slice().sort((n,s)=>s.score-n.score||n.temps-s.temps),n=>(d(),m("tr",{key:n.nom},[t("td",st,u(n.nom),1),t("td",at,u(n.score),1),t("td",lt,u(N(n.temps)),1)]))),128))])]),t("div",ut,[t("button",{onClick:e[4]||(e[4]=()=>{A.value=[],I.value=1,C.value="selection"}),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," 🔁 Rejouer ")])])):b("",!0)])])}}},pt=ie(it,[["__scopeId","data-v-b09dda62"]]);export{pt as default};
